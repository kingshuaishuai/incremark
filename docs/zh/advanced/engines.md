# åŒå¼•æ“æ¶æ„

Incremark é‡‡ç”¨**åŒå¼•æ“è§£æç³»ç»Ÿ**ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­åšå‡ºçš„ä¸€ä¸ªé‡è¦æ¶æ„å†³ç­–ã€‚æˆ‘ä»¬å¸Œæœ›ä¸ºç”¨æˆ·æä¾›é€‰æ‹©çš„è‡ªç”±ï¼šåœ¨è¿½æ±‚æè‡´æ€§èƒ½å’Œè¿½æ±‚å®Œç¾å…¼å®¹æ€§ä¹‹é—´æ‰¾åˆ°æœ€é€‚åˆè‡ªå·±çš„å¹³è¡¡ç‚¹ã€‚

## ä¸ºä»€ä¹ˆéœ€è¦åŒå¼•æ“ï¼Ÿ

åœ¨å¼€å‘ Incremark çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š**å¦‚ä½•åœ¨æµå¼ AI åœºæ™¯ä¸­å®ç°æœ€ä½³æ€§èƒ½ï¼Ÿ**

ç»è¿‡å¤§é‡è°ƒç ”å’Œæµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°ï¼š

- **Marked** è§£æé€Ÿåº¦æå¿«ï¼Œä½†åŸç”Ÿä¸æ”¯æŒè„šæ³¨ã€æ•°å­¦å…¬å¼ç­‰é«˜çº§ç‰¹æ€§
- **Micromark** è§„èŒƒå…¼å®¹æ€§å®Œç¾ï¼Œæ’ä»¶ç”Ÿæ€ä¸°å¯Œï¼Œä½†åŒ…ä½“ç§¯è¾ƒå¤§

æœ€ç»ˆæˆ‘ä»¬å†³å®šï¼š**ä¸¤ä¸ªéƒ½è¦**ã€‚

é€šè¿‡åŒå¼•æ“æ¶æ„ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®å®é™…åœºæ™¯çµæ´»é€‰æ‹©ï¼š
- å¯¹æ€§èƒ½æ•æ„Ÿçš„ AI èŠå¤©åœºæ™¯ â†’ ä½¿ç”¨ Marked å¼•æ“
- éœ€è¦ä¸¥æ ¼è§„èŒƒå…¼å®¹çš„æ–‡æ¡£åœºæ™¯ â†’ ä½¿ç”¨ Micromark å¼•æ“

## å¼•æ“æ¦‚è§ˆ

| å¼•æ“ | é€Ÿåº¦ | ç‰¹æ€§ | åŒ…ä½“ç§¯ | æœ€ä½³åœºæ™¯ |
|------|------|------|--------|----------|
| **Marked**ï¼ˆé»˜è®¤ï¼‰ | âš¡âš¡âš¡âš¡âš¡ | æ ‡å‡† + å¢å¼ºæ‰©å±• | è¾ƒå° | å®æ—¶æµå¼ã€AI å¯¹è¯ |
| **Micromark** | âš¡âš¡âš¡ | å®Œæ•´ CommonMark + æ’ä»¶ | è¾ƒå¤§ | å¤æ‚æ–‡æ¡£ã€ä¸¥æ ¼è§„èŒƒ |

## Marked å¼•æ“ï¼ˆé»˜è®¤ï¼‰

**Marked å¼•æ“**æ˜¯æˆ‘ä»¬çš„é»˜è®¤é€‰æ‹©ï¼Œä¸“ä¸º**æµå¼ AI åœºæ™¯**æ·±åº¦ä¼˜åŒ–ã€‚

### ä¸ºä»€ä¹ˆé€‰æ‹© Marked ä½œä¸ºé»˜è®¤å¼•æ“ï¼Ÿ

1. **æè‡´çš„è§£æé€Ÿåº¦**ï¼šMarked æ˜¯ JavaScript ç”Ÿæ€ä¸­æœ€å¿«çš„ Markdown è§£æå™¨ä¹‹ä¸€
2. **æˆç†Ÿç¨³å®š**ï¼šæ‹¥æœ‰è¶…è¿‡ 10 å¹´çš„å†å²ï¼Œè¢«æ— æ•°é¡¹ç›®éªŒè¯
3. **æ˜“äºæ‰©å±•**ï¼šæä¾›äº†çµæ´»çš„æ‰©å±•æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰éœ€å¢åŠ åŠŸèƒ½
4. **å°å·§çš„åŒ…ä½“ç§¯**ï¼šæœ‰åˆ©äºå‰ç«¯é¡¹ç›®çš„ tree-shaking ä¼˜åŒ–

### æˆ‘ä»¬ä¸º Marked åšäº†ä»€ä¹ˆå¢å¼ºï¼Ÿ

åŸç”Ÿ Marked æ˜¯ä¸€ä¸ª"å¤Ÿç”¨å°±å¥½"çš„è§£æå™¨ï¼Œå®ƒä¸“æ³¨äºæ ‡å‡† Markdown è¯­æ³•ï¼Œä¸åŒ…å«å¾ˆå¤šé«˜çº§ç‰¹æ€§ã€‚ä½†åœ¨ AI åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è¿™äº›ç‰¹æ€§ã€‚

å› æ­¤ï¼ŒIncremark é€šè¿‡è‡ªå®šä¹‰æ‰©å±•ä¸º Marked å¢åŠ äº†ä»¥ä¸‹èƒ½åŠ›ï¼š

| åŠŸèƒ½ | åŸç”Ÿ Marked | Incremark å¢å¼º | è¯´æ˜ |
|------|-------------|----------------|------|
| **è„šæ³¨** | âŒ ä¸æ”¯æŒ | âœ… å®Œæ•´ GFM è„šæ³¨ | `[^1]` å¼•ç”¨å’Œ `[^1]: å†…å®¹` å®šä¹‰ |
| **æ•°å­¦å…¬å¼** | âŒ ä¸æ”¯æŒ | âœ… è¡Œå†…å’Œå—çº§å…¬å¼ | `$E=mc^2$` å’Œ `$$...$$` |
| **è‡ªå®šä¹‰å®¹å™¨** | âŒ ä¸æ”¯æŒ | âœ… æŒ‡ä»¤è¯­æ³• | `:::tip`ã€`:::warning`ã€`:::danger` |
| **å†…è” HTML è§£æ** | âš ï¸ ä»…ä¿ç•™åŸæ–‡ | âœ… ç»“æ„åŒ–è§£æ | å°† HTML è§£æä¸ºå¯æ“ä½œçš„ AST èŠ‚ç‚¹ |
| **ä¹è§‚å¼•ç”¨å¤„ç†** | âŒ ä¸æ”¯æŒ | âœ… æµå¼å‹å¥½ | åœ¨æµå¼è¾“å…¥æ—¶ä¼˜é›…å¤„ç†æœªå®Œæˆçš„é“¾æ¥/å›¾ç‰‡ |
| **è„šæ³¨å®šä¹‰å—** | âŒ ä¸æ”¯æŒ | âœ… å¤šè¡Œå†…å®¹ | æ”¯æŒåŒ…å«ä»£ç å—ã€åˆ—è¡¨çš„å¤æ‚è„šæ³¨ |

> ğŸ’¡ è¿™äº›æ‰©å±•æ˜¯æˆ‘ä»¬é’ˆå¯¹ AI åœºæ™¯ç²¾å¿ƒè®¾è®¡çš„ã€‚å®ƒä»¬åœ¨æä¾›å®Œæ•´åŠŸèƒ½çš„åŒæ—¶ï¼Œå°½å¯èƒ½å‡å°‘æ€§èƒ½å¼€é”€ã€‚

### ä½¿ç”¨æ–¹å¼

Marked å¼•æ“æ˜¯**é»˜è®¤**çš„ï¼Œæ— éœ€ç‰¹æ®Šé…ç½®ï¼š

```vue
<script setup>
import { ref } from 'vue'
import { IncremarkContent } from '@incremark/vue'

const content = ref('')
const isFinished = ref(false)
</script>

<template>
  <!-- é»˜è®¤ä½¿ç”¨ Marked å¼•æ“ -->
  <IncremarkContent 
    :content="content" 
    :is-finished="isFinished"
  />
</template>
```

### å¯ç”¨/ç¦ç”¨ç‰¹å®šåŠŸèƒ½

```vue
<template>
  <IncremarkContent 
    :content="content" 
    :is-finished="isFinished"
    :incremark-options="{
      gfm: true,        // GFM æ‰©å±•ï¼ˆè¡¨æ ¼ã€åˆ é™¤çº¿ç­‰ï¼‰
      math: true,       // æ•°å­¦å…¬å¼
      containers: true, // è‡ªå®šä¹‰å®¹å™¨
      htmlTree: true    // HTML ç»“æ„åŒ–è§£æ
    }"
  />
</template>
```

## Micromark å¼•æ“

**Micromark å¼•æ“**æ˜¯è¿½æ±‚å®Œç¾è§„èŒƒå…¼å®¹æ€§çš„é€‰æ‹©ã€‚

### ä¸ºä»€ä¹ˆæä¾› Micromark é€‰é¡¹ï¼Ÿ

å°½ç®¡ Marked å¼•æ“å·²ç»èƒ½æ»¡è¶³å¤§å¤šæ•°åœºæ™¯ï¼Œä½†æŸäº›ç”¨æˆ·å¯èƒ½æœ‰æ›´ä¸¥æ ¼çš„éœ€æ±‚ï¼š

1. **ä¸¥æ ¼çš„ CommonMark è§„èŒƒå…¼å®¹**ï¼šMicromark æ˜¯ç›®å‰æœ€ç¬¦åˆ CommonMark è§„èŒƒçš„è§£æå™¨
2. **ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€**ï¼šGFMã€Mathã€Directive ç­‰æ’ä»¶éƒ½ç»è¿‡ç¤¾åŒºé•¿æœŸæ‰“ç£¨
3. **ç²¾ç¡®çš„ä½ç½®ä¿¡æ¯**ï¼šAST èŠ‚ç‚¹åŒ…å«å‡†ç¡®çš„è¡Œåˆ—ä½ç½®ï¼Œä¾¿äºé”™è¯¯å®šä½
4. **æ›´å¥½çš„è¾¹ç•Œæƒ…å†µå¤„ç†**ï¼šåœ¨ä¸€äº›å¤æ‚åµŒå¥—åœºæ™¯ä¸‹è¡¨ç°æ›´ç¨³å®š

### ä½¿ç”¨æ–¹å¼

è¦ä½¿ç”¨ Micromark å¼•æ“ï¼Œéœ€è¦å¯¼å…¥ `MicromarkAstBuilder` å¹¶é€šè¿‡ `astBuilder` é€‰é¡¹ä¼ å…¥ï¼š

```ts
// åœ¨ä½ çš„ composable æˆ– setup ä¸­
import { createIncremarkParser } from '@incremark/core'
import { MicromarkAstBuilder } from '@incremark/core/engines/micromark'

const parser = createIncremarkParser({
  astBuilder: MicromarkAstBuilder,
  gfm: true,
  math: true
})
```

> **æ³¨æ„**ï¼š`IncremarkContent` ç»„ä»¶é»˜è®¤ä½¿ç”¨ Marked å¼•æ“ã€‚å¦‚éœ€ä½¿ç”¨ Micromarkï¼Œä½ éœ€è¦ç›´æ¥ä½¿ç”¨ `useIncremark` é…åˆè‡ªå®šä¹‰ parserã€‚

### ä½•æ—¶åº”è¯¥ä½¿ç”¨ Micromarkï¼Ÿ

- ä½ çš„å†…å®¹åŒ…å«å¤æ‚çš„åµŒå¥—ç»“æ„
- ä½ éœ€è¦å¤„ç†ä¸€äº› Marked æ— æ³•æ­£ç¡®è§£æçš„è¾¹ç•Œæƒ…å†µ
- ä½ çš„åº”ç”¨å¯¹ CommonMark è§„èŒƒå…¼å®¹æ€§æœ‰ä¸¥æ ¼è¦æ±‚
- ä½ éœ€è¦ä½¿ç”¨æˆ‘ä»¬å†…ç½®æ‰©å±•ä¹‹å¤–çš„ Micromark æ’ä»¶

## å®Œæ•´åŸºå‡†æµ‹è¯•æ•°æ®

æˆ‘ä»¬å¯¹ 38 ä¸ªçœŸå®çš„ Markdown æ–‡ä»¶è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ï¼Œä»¥ä¸‹æ˜¯å®Œæ•´çš„æµ‹è¯•ç»“æœï¼š

### æµ‹è¯•ç¯å¢ƒ

- **æµ‹è¯•æ–‡ä»¶**ï¼š38 ä¸ªæ–‡ä»¶ï¼Œå…± 6,484 è¡Œï¼Œ128.55 KB
- **æµ‹è¯•æ–¹å¼**ï¼šæ¨¡æ‹Ÿæµå¼è¾“å…¥ï¼Œé€å­—ç¬¦ append
- **å¯¹æ¯”æ–¹æ¡ˆ**ï¼šStreamdownã€markstream-vueã€ant-design-x

### å®Œæ•´æµ‹è¯•ç»“æœ

| æ–‡ä»¶å | è¡Œæ•° | å¤§å°(KB) | Incremark | Streamdown | markstream | ant-design-x | vs Streamdown | vs markstream | vs ant-design-x |
|--------|------|----------|-----------|------------|------------|--------------|---------------|---------------|-----------------|
| test-footnotes-simple.md | 15 | 0.09 | 0.3 ms | 0.0 ms | 1.4 ms | 0.2 ms | 0.1x | 4.7x | 0.6x |
| simple-paragraphs.md | 16 | 0.41 | 0.9 ms | 0.9 ms | 5.9 ms | 1.0 ms | 1.1x | 6.7x | 1.2x |
| test-footnotes-multiline.md | 21 | 0.18 | 0.6 ms | 0.0 ms | 2.2 ms | 0.4 ms | 0.1x | 3.5x | 0.6x |
| test-footnotes-edge-cases.md | 27 | 0.25 | 0.8 ms | 0.0 ms | 4.2 ms | 1.2 ms | 0.0x | 5.3x | 1.5x |
| test-footnotes-complex.md | 28 | 0.24 | 2.1 ms | 0.0 ms | 4.8 ms | 1.0 ms | 0.0x | 2.3x | 0.5x |
| introduction.md | 34 | 1.57 | 5.6 ms | 12.6 ms | 75.6 ms | 12.8 ms | 2.2x | 13.4x | 2.3x |
| devtools.md | 51 | 0.92 | 1.2 ms | 0.9 ms | 6.1 ms | 1.1 ms | 0.8x | 5.0x | 0.9x |
| footnotes.md | 52 | 0.94 | 1.7 ms | 0.2 ms | 10.6 ms | 1.9 ms | 0.1x | 6.3x | 1.2x |
| html-elements.md | 55 | 1.02 | 1.6 ms | 2.2 ms | 12.6 ms | 2.8 ms | 1.4x | 7.8x | 1.7x |
| themes.md | 58 | 0.96 | 1.9 ms | 1.3 ms | 8.6 ms | 1.8 ms | 0.7x | 4.4x | 0.9x |
| test-footnotes-comprehensive.md | 63 | 0.66 | 5.6 ms | 0.1 ms | 25.8 ms | 7.7 ms | 0.0x | 4.6x | 1.4x |
| auto-scroll.md | 72 | 1.68 | 3.9 ms | 3.5 ms | 39.9 ms | 4.9 ms | 0.9x | 10.1x | 1.2x |
| custom-codeblocks.md | 72 | 1.44 | 3.4 ms | 2.0 ms | 14.9 ms | 2.5 ms | 0.6x | 4.4x | 0.7x |
| custom-components.md | 73 | 1.40 | 4.0 ms | 2.0 ms | 32.7 ms | 2.9 ms | 0.5x | 8.1x | 0.7x |
| custom-containers.md | 88 | 1.67 | 4.2 ms | 2.4 ms | 18.1 ms | 3.1 ms | 0.6x | 4.3x | 0.7x |
| typewriter.md | 88 | 1.89 | 5.6 ms | 4.1 ms | 35.0 ms | 4.9 ms | 0.7x | 6.2x | 0.9x |
| concepts.md | 91 | 4.29 | 12.0 ms | 50.5 ms | 381.9 ms | 53.6 ms | 4.2x | 31.9x | 4.5x |
| INLINE_CODE_UPDATE.md | 94 | 1.66 | 4.7 ms | 17.2 ms | 60.9 ms | 15.6 ms | 3.7x | 12.9x | 3.3x |
| comparison.md | 109 | 5.39 | 20.5 ms | 74.0 ms | 552.2 ms | 85.2 ms | 3.6x | 26.9x | 4.1x |
| basic-usage.md | 130 | 3.04 | 8.5 ms | 12.3 ms | 74.1 ms | 14.1 ms | 1.4x | 8.7x | 1.7x |
| CODE_BACKGROUND_SEPARATION.md | 131 | 2.83 | 8.7 ms | 28.8 ms | 153.6 ms | 31.3 ms | 3.3x | 17.6x | 3.6x |
| P2_SUMMARY.md | 138 | 2.61 | 8.3 ms | 38.4 ms | 157.2 ms | 41.9 ms | 4.6x | 18.9x | 5.0x |
| quick-start.md | 146 | 3.04 | 7.3 ms | 7.3 ms | 64.2 ms | 9.6 ms | 1.0x | 8.8x | 1.3x |
| complex-html-examples.md | 147 | 3.99 | 9.0 ms | 58.8 ms | 279.3 ms | 57.2 ms | 6.6x | 31.1x | 6.4x |
| CODE_COLOR_SEPARATION.md | 162 | 3.51 | 10.0 ms | 32.8 ms | 191.1 ms | 36.9 ms | 3.3x | 19.1x | 3.7x |
| P0_OPTIMIZATION_REPORT.md | 168 | 3.53 | 10.1 ms | 56.2 ms | 228.0 ms | 58.1 ms | 5.6x | 22.6x | 5.8x |
| COLOR_SYSTEM_REFACTOR.md | 169 | 3.78 | 18.5 ms | 64.0 ms | 355.5 ms | 69.1 ms | 3.5x | 19.2x | 3.7x |
| FOOTNOTE_TEST_GUIDE.md | 219 | 2.87 | 12.3 ms | 0.2 ms | 167.6 ms | 45.0 ms | 0.0x | 13.7x | 3.7x |
| P2_COLORS_PACKAGE_REPORT.md | 226 | 4.10 | 11.4 ms | 77.9 ms | 311.6 ms | 80.5 ms | 6.8x | 27.2x | 7.0x |
| FOOTNOTE_FIX_SUMMARY.md | 236 | 3.93 | 22.7 ms | 0.5 ms | 535.0 ms | 120.8 ms | 0.0x | 23.6x | 5.3x |
| BASE_COLORS_SYSTEM.md | 259 | 4.47 | 35.8 ms | 43.0 ms | 191.8 ms | 43.4 ms | 1.2x | 5.4x | 1.2x |
| OPTIMIZATION_COMPARISON.md | 270 | 5.42 | 17.8 ms | 52.3 ms | 366.1 ms | 61.9 ms | 2.9x | 20.6x | 3.5x |
| P1_OPTIMIZATION_REPORT.md | 327 | 5.63 | 20.7 ms | 106.8 ms | 433.8 ms | 114.8 ms | 5.2x | 21.0x | 5.5x |
| OPTIMIZATION_PLAN.md | 371 | 6.89 | 33.1 ms | 67.6 ms | 372.1 ms | 76.7 ms | 2.0x | 11.2x | 2.3x |
| OPTIMIZATION_SUMMARY.md | 391 | 6.24 | 19.1 ms | 208.4 ms | 980.6 ms | 217.8 ms | 10.9x | 51.3x | 11.4x |
| P1.5_COLOR_SYSTEM_REPORT.md | 482 | 9.12 | 22.0 ms | 145.5 ms | 789.8 ms | 168.2 ms | 6.6x | 35.9x | 7.7x |
| BLOCK_TRANSFORMER_ANALYSIS.md | 489 | 9.24 | 75.7 ms | 574.3 ms | 1984.1 ms | 619.9 ms | 7.6x | 26.2x | 8.2x |
| test-md-01.md | 916 | 17.67 | 87.7 ms | 1441.1 ms | 5754.7 ms | 1656.9 ms | 16.4x | 65.6x | 18.9x |
| **ã€åˆè®¡ã€‘** | **6484** | **128.55** | **519.4 ms** | **3190.3 ms** | **14683.9 ms** | **3728.6 ms** | **6.1x** | **28.3x** | **7.2x** |

### å¦‚ä½•ç†è§£è¿™ä»½æ•°æ®ï¼Ÿ

#### æˆ‘ä»¬è¯šå®åœ°å‘Šè¯‰ä½ ï¼šæœ‰äº›åœºæ™¯ Incremark æ›´æ…¢

ä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œåœ¨ `test-footnotes-*.md` å’Œ `FOOTNOTE_*.md` è¿™äº›æ–‡ä»¶ä¸Šï¼ŒIncremark æ¯” Streamdown æ…¢å¾ˆå¤šï¼ˆ0.0x - 0.1xï¼‰ã€‚

**åŸå› å¾ˆç®€å•ï¼šStreamdown ä¸æ”¯æŒè„šæ³¨è¯­æ³•ã€‚**

å½“ Streamdown é‡åˆ° `[^1]` è¿™æ ·çš„è„šæ³¨å¼•ç”¨æ—¶ï¼Œå®ƒç›´æ¥è·³è¿‡ä¸å¤„ç†ã€‚è€Œ Incremark ä¼šï¼š
1. è¯†åˆ«è„šæ³¨å¼•ç”¨
2. è§£æè„šæ³¨å®šä¹‰å—ï¼ˆå¯èƒ½åŒ…å«å¤šè¡Œå†…å®¹ã€ä»£ç å—ã€åˆ—è¡¨ç­‰ï¼‰
3. å»ºç«‹å¼•ç”¨å…³ç³»
4. ç”Ÿæˆæ­£ç¡®çš„ AST ç»“æ„

è¿™ä¸æ˜¯æ€§èƒ½é—®é¢˜ï¼Œæ˜¯**åŠŸèƒ½å·®å¼‚**ã€‚æˆ‘ä»¬è®¤ä¸ºå®Œæ•´çš„è„šæ³¨æ”¯æŒå¯¹äº AI åœºæ™¯éå¸¸é‡è¦ï¼Œæ‰€ä»¥é€‰æ‹©å®ç°å®ƒã€‚

#### çœŸæ­£çš„æ€§èƒ½ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ

æ’é™¤è„šæ³¨ç›¸å…³çš„æ–‡ä»¶ï¼Œçœ‹çœ‹æ ‡å‡† Markdown å†…å®¹çš„è¡¨ç°ï¼š

| æ–‡ä»¶ | è¡Œæ•° | Incremark | Streamdown | ä¼˜åŠ¿ |
|------|------|-----------|------------|------|
| concepts.md | 91 | 12.0 ms | 50.5 ms | **4.2x** |
| comparison.md | 109 | 20.5 ms | 74.0 ms | **3.6x** |
| complex-html-examples.md | 147 | 9.0 ms | 58.8 ms | **6.6x** |
| P0_OPTIMIZATION_REPORT.md | 168 | 10.1 ms | 56.2 ms | **5.6x** |
| OPTIMIZATION_SUMMARY.md | 391 | 19.1 ms | 208.4 ms | **10.9x** |
| test-md-01.md | 916 | 87.7 ms | 1441.1 ms | **16.4x** |

**ç»“è®º**ï¼šå¯¹äºæ ‡å‡† Markdown å†…å®¹ï¼Œæ–‡æ¡£è¶Šå¤§ï¼ŒIncremark çš„ä¼˜åŠ¿è¶Šæ˜æ˜¾ã€‚

#### ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„å·®è·ï¼Ÿ

è¿™æ˜¯ **O(n) vs O(nÂ²)** ç®—æ³•å¤æ‚åº¦çš„ç›´æ¥ä½“ç°ã€‚

ä¼ ç»Ÿè§£æå™¨ï¼ˆStreamdownã€ant-design-xã€markstream-vueï¼‰æ¯æ¬¡æ¥æ”¶æ–°çš„ chunk éƒ½è¦**é‡æ–°è§£ææ•´ä¸ªæ–‡æ¡£**ï¼š

```
Chunk 1: è§£æ 100 å­—ç¬¦
Chunk 2: è§£æ 200 å­—ç¬¦ (100 æ—§ + 100 æ–°)
Chunk 3: è§£æ 300 å­—ç¬¦ (200 æ—§ + 100 æ–°)
...
Chunk 100: è§£æ 10,000 å­—ç¬¦
```

æ€»å·¥ä½œé‡: `100 + 200 + 300 + ... + 10000 = 5,050,000` æ¬¡å­—ç¬¦å¤„ç†

**Incremark çš„å¢é‡è§£æ**åªå¤„ç†æ–°å†…å®¹ï¼š

```
Chunk 1: è§£æ 100 å­—ç¬¦ â†’ ç¼“å­˜ç¨³å®šå—
Chunk 2: ä»…è§£æ ~100 æ–°å­—ç¬¦
Chunk 3: ä»…è§£æ ~100 æ–°å­—ç¬¦
...
Chunk 100: ä»…è§£æ ~100 æ–°å­—ç¬¦
```

æ€»å·¥ä½œé‡: `100 Ã— 100 = 10,000` æ¬¡å­—ç¬¦å¤„ç†

å·®è·æ˜¯ **500 å€**ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ 18KB çš„æ–‡æ¡£èƒ½å¿« 16 å€ä»¥ä¸Šã€‚

## åŠŸèƒ½å¯¹ç­‰æ€§

æˆ‘ä»¬åŠªåŠ›ç¡®ä¿ä¸¤ä¸ªå¼•æ“åœ¨åŠŸèƒ½ä¸Šä¿æŒä¸€è‡´ï¼š

| åŠŸèƒ½ | Marked å¼•æ“ | Micromark å¼•æ“ |
|------|-------------|----------------|
| GFMï¼ˆè¡¨æ ¼ã€åˆ é™¤çº¿ã€è‡ªåŠ¨é“¾æ¥ï¼‰ | âœ… | âœ… |
| æ•°å­¦å…¬å¼ï¼ˆ`$...$` å’Œ `$$...$$`ï¼‰ | âœ… | âœ… |
| è‡ªå®šä¹‰å®¹å™¨ï¼ˆ`:::tip` ç­‰ï¼‰ | âœ… | âœ… |
| HTML å…ƒç´ è§£æ | âœ… | âœ… |
| è„šæ³¨ | âœ… | âœ… |
| æ‰“å­—æœºåŠ¨ç”» | âœ… | âœ… |
| å¢é‡æ›´æ–° | âœ… | âœ… |

## åˆ‡æ¢å¼•æ“

å¼•æ“é€‰æ‹©æ˜¯åœ¨**åˆå§‹åŒ–æ—¶**è¿›è¡Œçš„ï¼Œè€Œéè¿è¡Œæ—¶ã€‚è¿™æ˜¯ä¸ºäº† tree-shaking ä¼˜åŒ–è€Œè®¾è®¡çš„ã€‚

### ä¸ºä»€ä¹ˆä¸æ”¯æŒè¿è¡Œæ—¶åˆ‡æ¢ï¼Ÿ

ä¸ºäº†ç¡®ä¿æœ€ä¼˜çš„æ‰“åŒ…ä½“ç§¯ï¼š
- é»˜è®¤å¯¼å…¥åªåŒ…å« `marked` å¼•æ“
- `micromark` å¼•æ“éœ€è¦å•ç‹¬å¯¼å…¥
- è¿™è®©æ‰“åŒ…å·¥å…·å¯ä»¥ tree-shake æœªä½¿ç”¨çš„å¼•æ“

### å¦‚ä½•åˆ‡æ¢å¼•æ“

```vue
<script setup>
import { ref } from 'vue'
import { IncremarkContent } from '@incremark/vue'

const content = ref('')
const isFinished = ref(false)

// å¼•æ“åœ¨åˆå§‹åŒ–æ—¶é€‰æ‹©
// ä½¿ç”¨ markedï¼ˆé»˜è®¤ï¼‰ï¼šæ— éœ€é¢å¤–å¯¼å…¥
// ä½¿ç”¨ micromarkï¼šå¯¼å…¥ MicromarkAstBuilder
</script>

<template>
  <!-- é»˜è®¤ä½¿ç”¨ marked å¼•æ“ -->
  <IncremarkContent 
    :content="content" 
    :is-finished="isFinished"
    :incremark-options="{ gfm: true, math: true }"
  />
</template>
```

### ä½¿ç”¨ Micromark å¼•æ“

è¦ä½¿ç”¨ micromarkï¼Œä»å•ç‹¬çš„å¼•æ“å…¥å£å¯¼å…¥ `MicromarkAstBuilder`ï¼š

```ts
import { createIncremarkParser } from '@incremark/core'
import { MicromarkAstBuilder } from '@incremark/core/engines/micromark'

// ä½¿ç”¨ micromark å¼•æ“åˆ›å»ºè§£æå™¨
const parser = createIncremarkParser({
  astBuilder: MicromarkAstBuilder,
  gfm: true,
  math: true
})
```

> âš ï¸ **Tree-shaking è¯´æ˜**ï¼šä» `@incremark/core/engines/micromark` å¯¼å…¥åªä¼šå°† micromark æ·»åŠ åˆ°ä½ çš„ bundle ä¸­ã€‚é»˜è®¤å¯¼å…¥åªä¿ç•™ markedã€‚

## æ‰©å±•å¼•æ“

ä¸¤ä¸ªå¼•æ“éƒ½æ”¯æŒè‡ªå®šä¹‰æ‰©å±•ã€‚è¯¦è§ [æ‰©å±•æŒ‡å—](/zh/advanced/extensions)ã€‚

```ts
// è‡ªå®šä¹‰ marked æ‰©å±•ç¤ºä¾‹
import { createCustomExtension } from '@incremark/core'

const myExtension = createCustomExtension({
  name: 'myPlugin',
  // ... æ‰©å±•é…ç½®
})
```

## æ€»ç»“ä¸å»ºè®®

| æ–¹é¢ | Marked | Micromark |
|------|--------|-----------|
| è§£æé€Ÿåº¦ | âš¡âš¡âš¡âš¡âš¡ | âš¡âš¡âš¡ |
| åŒ…ä½“ç§¯ | ğŸ“¦ æ›´å° | ğŸ“¦ è¾ƒå¤§ |
| CommonMark å…¼å®¹æ€§ | âœ… è‰¯å¥½ | âœ… å®Œç¾ |
| å†…ç½®æ‰©å±• | âœ… è„šæ³¨ã€æ•°å­¦å…¬å¼ã€å®¹å™¨ | âœ… é€šè¿‡æ’ä»¶ |
| æ’ä»¶ç”Ÿæ€ | ğŸ”§ æˆé•¿ä¸­ | ğŸ”§ æˆç†Ÿ |
| æ¨èåœºæ™¯ | æµå¼ AIã€å®æ—¶æ¸²æŸ“ | é™æ€æ–‡æ¡£ã€ä¸¥æ ¼è§„èŒƒ |

**æˆ‘ä»¬çš„å»ºè®®**ï¼š

1. **å¤§å¤šæ•°åœºæ™¯**ï¼šä½¿ç”¨é»˜è®¤çš„ Marked å¼•æ“ï¼Œå®ƒå·²ç»è¶³å¤Ÿå¥½
2. **é‡åˆ°è§£æé—®é¢˜**ï¼šå¦‚æœæŸäº›è¾¹ç•Œæƒ…å†µ Marked å¤„ç†ä¸å¥½ï¼Œå°è¯•åˆ‡æ¢åˆ° Micromark
3. **æç«¯æ€§èƒ½éœ€æ±‚**ï¼šMarked å¼•æ“æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©
4. **ä¸¥æ ¼è§„èŒƒéœ€æ±‚**ï¼šMicromark å¼•æ“æ›´é€‚åˆä½ 

æˆ‘ä»¬ä¼šæŒç»­ä¼˜åŒ–ä¸¤ä¸ªå¼•æ“ï¼Œç¡®ä¿å®ƒä»¬éƒ½èƒ½ä¸ºä½ æä¾›æœ€å¥½çš„ä½“éªŒã€‚
