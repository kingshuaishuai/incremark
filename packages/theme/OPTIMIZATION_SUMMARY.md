# Theme åŒ…ä¼˜åŒ–æ€»ç»“

## ğŸ“‹ ä¼˜åŒ–å†…å®¹

### 1. âœ… **ä¿®å¤æ¶æ„æ€§é—®é¢˜ï¼šCSS Variables ç”Ÿæˆé¡ºåº**

**é—®é¢˜ï¼š** 
- Less æ–‡ä»¶ä¸­ç›´æ¥å¼•ç”¨ `var(--incremark-*)` CSS Variables
- ä½†è¿™äº›å˜é‡æ˜¯åœ¨æ„å»º**ä¹‹å**æ‰ç”Ÿæˆåˆ° dist/styles.css
- å¯¼è‡´å¾ªç¯ä¾èµ–å’Œæ„å»ºé€»è¾‘æ··ä¹±

**è§£å†³æ–¹æ¡ˆï¼š**
- åˆ›å»º `scripts/generate-css-variables.ts` è„šæœ¬
- æ„å»ºæµç¨‹æ”¹ä¸ºï¼š`tsup â†’ generate:css-vars â†’ build:styles`
- ç”Ÿæˆ `src/styles/css-variables.less`ï¼ˆåŒ…å«æ‰€æœ‰ä¸»é¢˜çš„ CSS Variablesï¼‰
- `variables.less` å¯¼å…¥ `css-variables.less`ï¼Œç¡®ä¿ Less ç¼–è¯‘æ—¶å˜é‡å·²å­˜åœ¨

**æ–‡ä»¶å˜åŒ–ï¼š**
```
æ–°å¢: scripts/generate-css-variables.ts
æ–°å¢: src/styles/css-variables.less (è‡ªåŠ¨ç”Ÿæˆï¼Œå·²åŠ å…¥ .gitignore)
ä¿®æ”¹: scripts/build-styles.ts (ç§»é™¤ CSS Variables ç”Ÿæˆé€»è¾‘)
ä¿®æ”¹: src/styles/variables.less (å¯¼å…¥ css-variables.less)
ä¿®æ”¹: package.json (æ›´æ–° build è„šæœ¬)
```

### 2. âœ… **ä»£ç ç»„ç»‡ä¼˜åŒ–ï¼šæ‹†åˆ†æ ·å¼æ–‡ä»¶**

**æ”¹è¿›ï¼š**
- å°† `code-block.less` (163è¡Œ) æ‹†åˆ†ä¸ºï¼š
  - `code-block.less` - ä»£ç å—æ ·å¼ (90è¡Œ)
  - `mermaid.less` - Mermaid å›¾è¡¨æ ·å¼ (73è¡Œ)
- æé«˜å¯ç»´æŠ¤æ€§ï¼ŒèŒè´£æ›´æ¸…æ™°

**æ–‡ä»¶å˜åŒ–ï¼š**
```
æ–°å¢: src/styles/components/mermaid.less
ä¿®æ”¹: src/styles/components/code-block.less
ä¿®æ”¹: src/styles/index.less (å¯¼å…¥ mermaid.less)
```

### 3. âœ… **Token ç³»ç»Ÿå®Œå–„**

**æ”¹è¿›ï¼š**
- æ·»åŠ  `@spacing-xs: 4px` (æå°é—´è·)
- æ·»åŠ  `@font-size-small: 12px` (å°å·å­—ä½“)
- æ›¿æ¢ç¡¬ç¼–ç å€¼ä¸º token å˜é‡

**ç¤ºä¾‹ï¼š**
```less
// ä¹‹å‰
padding: 4px 10px;
font-size: 12px;

// ä¹‹å  
padding: @spacing-xs 10px;
font-size: @font-size-small;
```

### 4. âœ… **æ„å»ºæµç¨‹ä¼˜åŒ–**

**æ”¹è¿›ï¼š**
- æ·»åŠ ç¯å¢ƒå˜é‡æ”¯æŒ (`NODE_ENV`)
- ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨å‹ç¼© CSS
- å¼€å‘ç¯å¢ƒç”Ÿæˆ source map
- æ·»åŠ æ–‡ä»¶å¤§å°æŠ¥å‘Š
- æ·»åŠ æ„å»ºå‰æ£€æŸ¥ï¼ˆcss-variables.less å¿…é¡»å­˜åœ¨ï¼‰

**ä½¿ç”¨ï¼š**
```bash
# å¼€å‘æ¨¡å¼
pnpm run build

# ç”Ÿäº§æ¨¡å¼  
NODE_ENV=production pnpm run build
```

### 5. âœ… **æ–‡æ¡£æ›´æ–°**

**æ”¹è¿›ï¼š**
- ä¿®å¤ README.md ä¸­çš„é”™è¯¯ç¤ºä¾‹
- æ›´æ–° API æ–‡æ¡£ï¼Œåæ˜ çœŸå®çš„ç±»å‹å’Œå‡½æ•°
- æ–°å¢ `BUILD.md` æ„å»ºè¯´æ˜æ–‡æ¡£
- æ·»åŠ å¸¸è§é—®é¢˜è§£ç­”

**ä¿®å¤çš„é”™è¯¯ï¼š**
- âŒ `themes.light` â†’ âœ… ä½¿ç”¨ `'dark'` æˆ– `darkTheme`
- âŒ `ThemeConfig` â†’ âœ… `DesignTokens` å’Œ `Partial<DesignTokens>`
- âŒ é”™è¯¯çš„ CSS å˜é‡å â†’ âœ… æ­£ç¡®çš„åµŒå¥—å‘½å

##  ğŸ“ æ–°æ–‡ä»¶ç»“æ„

```
packages/theme/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate-css-variables.ts  [æ–°å¢] ç”Ÿæˆ CSS Variables
â”‚   â””â”€â”€ build-styles.ts            [ä¼˜åŒ–] ç¼–è¯‘ Less
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ css-variables.less     [æ–°å¢] è‡ªåŠ¨ç”Ÿæˆçš„ CSS Variables
â”‚   â”‚   â”œâ”€â”€ variables.less         [ä¿®æ”¹] å¯¼å…¥ css-variables.less
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ code-block.less    [ä¼˜åŒ–] åªåŒ…å«ä»£ç å—æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ mermaid.less       [æ–°å¢] Mermaid å›¾è¡¨æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ index.less             [ä¿®æ”¹] å¯¼å…¥ mermaid.less
â”‚   â””â”€â”€ ...
â”œâ”€â”€ BUILD.md                        [æ–°å¢] æ„å»ºè¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README.md                       [ä¼˜åŒ–] ä¿®å¤é”™è¯¯ï¼Œæ›´æ–°æ–‡æ¡£
â””â”€â”€ package.json                    [ä¿®æ”¹] æ›´æ–°æ„å»ºè„šæœ¬
```

## ğŸ”„ æ–°çš„æ„å»ºæµç¨‹

### ä¹‹å‰ï¼ˆæœ‰é—®é¢˜ï¼‰
```
Less ç¼–è¯‘ â†’ ç”Ÿæˆ CSS Variables â†’ åˆå¹¶ CSS
   â†‘                                    â†“
   â””â”€â”€â”€â”€â”€â”€ å¾ªç¯ä¾èµ–ï¼Less å¼•ç”¨äº†æœªå®šä¹‰çš„å˜é‡
```

### ç°åœ¨ï¼ˆæ­£ç¡®ï¼‰
```
1. tsup ç¼–è¯‘ TypeScript
   â†“
2. ç”Ÿæˆ css-variables.less (ä» TS tokens ç”Ÿæˆ)
   â†“
3. Less ç¼–è¯‘ (å¼•ç”¨ css-variables.less)
   â†“
4. è¾“å‡ºæœ€ç»ˆ CSS
```

## ğŸ¯ å…³é”®æ”¹è¿›ç‚¹

### 1. **å•ä¸€æ•°æ®æº**
- Token å€¼åªåœ¨ `src/tokens/*.ts` å’Œ `src/themes/*.ts` ä¸­å®šä¹‰
- CSS Variables ç”±è¿™äº› TS å®šä¹‰è‡ªåŠ¨ç”Ÿæˆ
- é¿å… TS å’Œ CSS çš„å€¼ä¸åŒæ­¥

### 2. **ç±»å‹å®‰å…¨**
- Token æœ‰å®Œæ•´çš„ TypeScript ç±»å‹
- æ„å»ºæ—¶ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥
- è¿è¡Œæ—¶é€šè¿‡ CSS Variables æ”¯æŒåŠ¨æ€ä¸»é¢˜

### 3. **æ¸…æ™°çš„ä¾èµ–å…³ç³»**
- `css-variables.less` æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸åº”æ‰‹åŠ¨ç¼–è¾‘
- å·²åŠ å…¥ `.gitignore`ï¼Œé¿å…ç‰ˆæœ¬å†²çª
- æ„å»ºå‰ä¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

### 4. **æ›´å¥½çš„å¼€å‘ä½“éªŒ**
- æ¸…æ™°çš„é”™è¯¯æç¤º
- è¯¦ç»†çš„æ„å»ºæ–‡æ¡£
- æ–‡ä»¶å¤§å°æŠ¥å‘Š

## ğŸ“Š æ€§èƒ½æ”¹è¿›

- âœ… Less ç¼–è¯‘æ—¶æ— éœ€ç­‰å¾… TS å¯¼å…¥
- âœ… ç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨å‹ç¼©ï¼ˆå‡å°‘æ–‡ä»¶ä½“ç§¯ï¼‰
- âœ… å¼€å‘ç¯å¢ƒä¿ç•™ source mapï¼ˆä¾¿äºè°ƒè¯•ï¼‰
- âœ… æ‹†åˆ†å¤§æ–‡ä»¶ï¼ˆæé«˜å¯ç»´æŠ¤æ€§ï¼‰

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å¼€å‘æ¨¡å¼
```bash
cd packages/theme
pnpm run dev           # ç›‘å¬ TS å˜åŒ–
pnpm run dev:styles    # ç›‘å¬æ ·å¼å˜åŒ–
```

### ç”Ÿäº§æ„å»º
```bash
pnpm run build         # å®Œæ•´æ„å»º
```

### ä»…é‡æ–°ç”Ÿæˆ CSS Variables
```bash
pnpm run generate:css-vars
```

### ä»…é‡æ–°ç¼–è¯‘æ ·å¼
```bash
pnpm run build:styles
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦æ‰‹åŠ¨ç¼–è¾‘ `css-variables.less`**
   - æ­¤æ–‡ä»¶ç”±è„šæœ¬è‡ªåŠ¨ç”Ÿæˆ
   - ä¿®æ”¹ Token åº”åœ¨ `src/tokens/*.ts` å’Œ `src/themes/*.ts` ä¸­è¿›è¡Œ

2. **æ„å»ºé¡ºåºå¾ˆé‡è¦**
   - å¿…é¡»å…ˆè¿è¡Œ `tsup` (ç¼–è¯‘ TS)
   - ç„¶åè¿è¡Œ `generate:css-vars` (ç”Ÿæˆ CSS Variables)
   - æœ€åè¿è¡Œ `build:styles` (ç¼–è¯‘ Less)

3. **é¦–æ¬¡æ„å»º**
   - å¦‚æœ `css-variables.less` ä¸å­˜åœ¨ï¼ŒLess ç¼–è¯‘ä¼šå¤±è´¥
   - è¿è¡Œ `pnpm run build` ä¼šè‡ªåŠ¨å¤„ç†

## ğŸ“ TODOï¼ˆæœªæ¥å¯é€‰ï¼‰

- [ ] æ·»åŠ æ›´å¤šè¯­ä¹‰åŒ–é¢œè‰² token (success, error, warning, info)
- [ ] ä¸º blockquoteã€math ç­‰ç»„ä»¶æ·»åŠ ä¸“å±é¢œè‰² token
- [ ] æ·»åŠ é«˜å¯¹æ¯”åº¦ä¸»é¢˜ï¼ˆå¯è®¿é—®æ€§ï¼‰
- [ ] åœ¨ playground ä¸­æ·»åŠ ä¸»é¢˜é¢„è§ˆå·¥å…·
- [ ] æ·»åŠ  PostCSS å¤„ç†ï¼ˆautoprefixer ç­‰ï¼‰

## âœ¨ æ€»ç»“

è¿™æ¬¡ä¼˜åŒ–è§£å†³äº†æ ¸å¿ƒçš„æ¶æ„é—®é¢˜ï¼Œä½¿æ„å»ºæµç¨‹æ›´åŠ æ¸…æ™°å’Œåˆç†ã€‚ç°åœ¨ï¼š

1. âœ… Token åœ¨ TypeScript ä¸­å®šä¹‰ï¼Œç±»å‹å®‰å…¨
2. âœ… CSS Variables è‡ªåŠ¨ç”Ÿæˆï¼Œå•ä¸€æ•°æ®æº
3. âœ… Less ç¼–è¯‘æ—¶æ‰€æœ‰å˜é‡éƒ½å·²å­˜åœ¨ï¼Œæ— å¾ªç¯ä¾èµ–
4. âœ… ä»£ç ç»„ç»‡æ›´æ¸…æ™°ï¼Œå¯ç»´æŠ¤æ€§æ›´é«˜
5. âœ… æ–‡æ¡£å®Œå–„ï¼Œæ˜“äºç†è§£å’Œä½¿ç”¨

**å…³é”®æ”¶è·ï¼š** åœ¨è®¾è®¡å·¥å…·é“¾æ—¶ï¼Œè¦ç¡®ä¿ä¾èµ–å…³ç³»æ¸…æ™°ï¼Œé¿å…"å…ˆç”¨åå®šä¹‰"çš„å¾ªç¯ä¾èµ–é—®é¢˜ã€‚

